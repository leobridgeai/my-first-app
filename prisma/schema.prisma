generator client {
  provider = "prisma-client"
  output   = "../src/generated/prisma"
}

datasource db {
  provider = "sqlite"
}

model Album {
  id          String       @id @default(uuid())
  name        String
  slug        String       @unique
  description String?
  sortOrder   Int          @default(0)
  createdAt   DateTime     @default(now())
  updatedAt   DateTime     @updatedAt
  photos      PhotoAlbum[]
}

model Photo {
  id                 String       @id @default(uuid())
  title              String?
  description        String?
  cloudinaryPublicId String
  cloudinaryUrl      String
  width              Int
  height             Int
  isFeatured         Boolean      @default(false)
  sortOrder          Int          @default(0)
  createdAt          DateTime     @default(now())
  updatedAt          DateTime     @updatedAt
  albums             PhotoAlbum[]
}

model PhotoAlbum {
  photoId String
  albumId String
  photo   Photo  @relation(fields: [photoId], references: [id], onDelete: Cascade)
  album   Album  @relation(fields: [albumId], references: [id], onDelete: Cascade)

  @@id([photoId, albumId])
}
